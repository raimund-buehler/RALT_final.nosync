}
library(tidyverse)
all_files <- list.files("RALT_csv")
for(file in all_files){
df <- read_csv(paste("RALT_csv/", file, sep = ""))
Sub <- str_sub(file, start = 1, end = 6)
tryCatch({
# All stims
stims <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
distinct(stim) %>%
na.omit() %>%
pull(stim)
R <- tibble(stim = stims)
i = 1
for(stim in stims){
temp <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
filter(stim == stim)
R <- nest_join(R, temp)
}
R <- unnest(R, cols = c(temp))
write_csv(R, paste("RL_data/", Sub, ".csv", sep = ""))
},
error = function(cond){
message(paste("Failed for subject:", Sub))
message(paste("Original Error:", cond))
})
}
library(tidyverse)
data <- read_csv("all_stims.csv")
data
data %>% column_to_rownames(X1)
data %>% column_to_rownames("X1")
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID) %>%
summarise(Alpha, Theta)
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID) %>%
summarise()
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
View(data)
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
filter(BIC = 21.605346) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
filter(BIC == 21.605346) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
filter(Alpha == 0 & Theta ==1) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
filter(!Alpha == 0 & Theta ==1) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
filter(!(Alpha == 0 & Theta ==1)) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
filter(!(Alpha == 0 & Theta ==1))
data %>%
column_to_rownames("X1") %>%
filter((Alpha == 0 & Theta ==1))
filtered_data <-
data %>%
column_to_rownames("X1") %>%
filter((Alpha == 0 & Theta ==1))
filtered_data <-
data %>%
column_to_rownames("X1") %>%
filter(!(Alpha == 0 & Theta ==1)) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
View(filtered_data)
filtered_data %>% hist()
filtered_data$avg_alpha %>% hist()
shapiro.test(filtered_data$avg_alpha)
View(df)
library(tidyverse)
all_files <- list.files("RALT_csv")
for(file in all_files){
df <- read_csv(paste("RALT_csv/", file, sep = ""))
Sub <- str_sub(file, start = 1, end = 6)
tryCatch({
# All stims
stims <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
distinct(stim) %>%
na.omit() %>%
pull(stim)
R <- tibble(stim = stims)
i = 1
for(stim in stims){
temp <-
df %>%
select(stim, ParticipantAnswer, Reward, BlockType) %>%
slice_tail(n = -12) %>%
filter(stim == stim)
R <- nest_join(R, temp)
}
R <- unnest(R, cols = c(temp))
write_csv(R, paste("RL_data/", Sub, ".csv", sep = ""))
},
error = function(cond){
message(paste("Failed for subject:", Sub))
message(paste("Original Error:", cond))
})
}
library(tidyverse)
data <- read_csv("all_stims.csv")
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID, BlockType) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
avg <-
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID, BlockType) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
?t.test
avg %>% filter(BlockType == "social") %>% pull(avg_alpha)
alpha_social <- avg %>% filter(BlockType == "social") %>% pull(avg_alpha)
theta_social <- avg %>% filter(BlockType == "social") %>% pull(avg_theta)
alpha_nsocial <- avg %>% filter(BlockType == "nonsocial") %>% pull(avg_alpha)
theta_nsocial <- avg %>% filter(BlockType == "nonsocial") %>% pull(avg_theta)
t.test(alpha_social, alpha_nsocial)
cor(alpha_social, alpha_nsocial)
t.test(theta_social, theta_nsocial)
filtered_data <-
data %>%
column_to_rownames("X1") %>%
filter(!(Alpha == 0 & Theta ==1)) %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta))
avg
saveRDS(avg, "learning_rates.RDS")
data <- read_csv("all_stims_rho.csv")
library(tidyverse)
data <- read_csv("all_stims_rho.csv")
View(data)
avg <-
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID, BlockType) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta),
avg_rho = mean(Rho))
View(avg)
data_no_extr <-
data %>% filter(Rho == (0|1))
View(data_no_extr)
data_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1))
summarise(avg_rho = mean(Rho))
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1)) %>%
filter(BlockType == "social") %>%
summarise(avg_rho = mean(Rho))
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1)) %>%
filter(BlockType == "social") %>%
column_to_rownames("X1") %>%
group_by(Sub_ID, BlockType) %>%
summarise(avg_rho = mean(Rho))
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1)) %>%
filter(BlockType == "social") %>%
avg <-
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID, BlockType) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta),
avg_rho = mean(Rho))
View(rho_no_extr)
plot(rho_no_extr)
plot(rho_no_extr$avg_rho)
data_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1),
!(Alpha == 0| Alpha ==1),
!(Theta == 0| Theta ==1)) %>%
filter(BlockType == "social")
View(data_no_extr)
data_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1),
!(Alpha == 0| Alpha ==1),
!(Theta == 1| Theta == 50)) %>%
filter(BlockType == "social")
data_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1)) %>%
filter(BlockType == "social")
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1)) %>%
filter(BlockType == "social")
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho ==1)) %>%
filter(BlockType == "social")
alpha_no_extr <-
data %>% filter(!(Alpha == 0| Alpha ==1)) %>%
filter(BlockType == "social")
theta_no_extr <-
data %>% filter(!(Theta == 0| Theta ==1)) %>%
filter(BlockType == "social")
View(theta_no_extr)
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho == 1)) %>%
filter(BlockType == "social")
alpha_no_extr <-
data %>% filter(!(Alpha == 0| Alpha == 1)) %>%
filter(BlockType == "social")
theta_no_extr <-
data %>% filter(!(Theta == 0| Theta == 50)) %>%
filter(BlockType == "social")
View(theta_no_extr)
theta_no_extr <-
data %>% filter(!(Theta == 1| Theta == 50)) %>%
filter(BlockType == "social")
avg <-
data %>%
column_to_rownames("X1") %>%
group_by(Sub_ID, BlockType) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta),
avg_rho = mean(Rho))
t.test(alpha_social, alpha_nsocial)
#Clean
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho == 1)) %>%
filter(BlockType == "social")
alpha_no_extr <-
data %>% filter(!(Alpha == 0| Alpha == 1)) %>%
filter(BlockType == "social")
theta_no_extr <-
data %>% filter(!(Theta == 1| Theta == 50)) %>%
filter(BlockType == "social")
#Clean
rho_no_extr <-
data %>% filter(!(Rho == 0| Rho == 1)) %>%
filter(BlockType == "social") %>%
pull(Rho)
alpha_no_extr <-
data %>% filter(!(Alpha == 0| Alpha == 1)) %>%
filter(BlockType == "social") %>%
pull(Alpha)
theta_no_extr <-
data %>% filter(!(Theta == 1| Theta == 50)) %>%
filter(BlockType == "social") %>%
pull(Theta)
#Dirty
Soc <- data %>%
filter(BlockType == social)
#Dirty
Soc <- data %>%
filter(BlockType == "social")
Rho <- Soc %>%
pull(Rho)
Theta <- Soc %>% pull(Alpha, Theta, Rho)
Soc %>% pull(Alpha, Theta, Rho)
Soc
?pull
Soc %>% pull(c(Alpha, Theta, Rho))
starwars
starwars %>% pull(height, name = )
starwars %>% pull(height, name)
Soc %>% pull(Alpha, Theta, Rho)
#Dirty
dirty <- data %>%
filter(BlockType == "social") %>%
select(Alpha, Theta, Rho)
dirty
data
#Dirty
dirty <- data %>%
filter(BlockType == "social") %>%
select(Alpha, Theta, Rho, Sub_ID)
dirty
#Clean
rho_no_extr <-
dirty %>% filter(!(Rho == 0| Rho == 1)) %>%
pull(Rho)
#Clean
rho_clean <-
dirty %>% filter(!(Rho == 0| Rho == 1)) %>%
pull(Rho)
alpha_clean <-
dirty %>% filter(!(Alpha == 0| Alpha == 1)) %>%
pull(Alpha)
theta_clean <-
dirty %>% filter(!(Theta == 1| Theta == 50)) %>%
pull(Theta)
tibble("a_clean" = a_clean, "t_clean" = t_clean, "r_clean" = r_clean)
?tibble
#Clean
r_clean <-
dirty %>% filter(!(Rho == 0| Rho == 1)) %>%
pull(Rho)
a_clean <-
dirty %>% filter(!(Alpha == 0| Alpha == 1)) %>%
pull(Alpha)
t_clean <-
dirty %>% filter(!(Theta == 1| Theta == 50)) %>%
pull(Theta)
tibble("a_clean" = a_clean, "t_clean" = t_clean, "r_clean" = r_clean)
#Clean
r_clean <-
dirty %>% filter(!(Rho == 0| Rho == 1)) %>%
select(Sub_ID, Rho)
a_clean <-
dirty %>% filter(!(Alpha == 0| Alpha == 1)) %>%
select(Sub_ID, Alpha)
t_clean <-
dirty %>% filter(!(Theta == 1| Theta == 50)) %>%
select(Sub_ID, Alpha)
#Clean
r_clean <-
dirty %>% filter(!(Rho == 0| Rho == 1)) %>%
select(Sub_ID, Rho) %>%
group_by(Sub_ID) %>%
summarise(avg_r = mean(Rho))
r_clean
a_clean <-
dirty %>% filter(!(Alpha == 0| Alpha == 1)) %>%
select(Sub_ID, Alpha) %>%
group_by(Sub_ID) %>%
summarise(avg_a = mean(Alpha))
t_clean <-
dirty %>% filter(!(Theta == 1| Theta == 50)) %>%
select(Sub_ID, Alpha) %>%
group_by(Sub_ID) %>%
summarise(avg_t = mean(Theta))
t_clean <-
dirty %>% filter(!(Theta == 1| Theta == 50)) %>%
select(Sub_ID, Theta) %>%
group_by(Sub_ID) %>%
summarise(avg_t = mean(Theta))
t_clean
avg <-
dirty %>%
column_to_rownames("X1") %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta),
avg_rho = mean(Rho))
avg <-
dirty %>%
group_by(Sub_ID) %>%
summarise(avg_alpha = mean (Alpha),
avg_theta = mean(Theta),
avg_rho = mean(Rho))
avg
dirty
dirty %>% distinc(Sub_ID)
dirty %>% distinct(Sub_ID)
saveRDS(avg, "avg.RDS")
saveRDS(a_clean, "a_clean.RDS")
saveRDS(t_clean, "t_clean.RDS")
saveRDS(r_clean, "r_clean.RDS")
all_files <- list.files("RALT_csv")
debugSource("~/Documents/UNIDOCS/Python:Psychopy:RALT/RL_code/RALT_RL/RALT_extract.R")
View(temp)
Sub
all_files <- list.files("RALT_csv")
all_files
for(file in all_files){
df <- read_csv(paste("RALT_csv/", file, sep = ""))
Sub <- str_sub(file, start = 1, end = 6)
if(Sub == "elgr00"){
browser()
}
tryCatch({
# All stims
stims <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
distinct(stim) %>%
na.omit() %>%
pull(stim)
R <- tibble(stim = stims)
i = 1
for(stim in stims){
temp <-
df %>%
select(stim, ParticipantAnswer, Reward, BlockType) %>%
slice_tail(n = -12) %>%
filter(stim == stim)
R <- nest_join(R, temp)
}
R <- unnest(R, cols = c(temp))
write_csv(R, paste("RL_data_debug/", Sub, ".csv", sep = ""))
},
error = function(cond){
message(paste("Failed for subject:", Sub))
message(paste("Original Error:", cond))
})
}
for(file in all_files){
df <- read_csv(paste("RALT_csv/", file, sep = ""))
Sub <- str_sub(file, start = 1, end = 6)
if(Sub == "elgr00"){
browser()
}
tryCatch({
# All stims
stims <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
distinct(stim) %>%
na.omit() %>%
pull(stim)
R <- tibble(stim = stims)
i = 1
for(stim in stims){
temp <-
df %>%
select(stim, ParticipantAnswer, Reward, BlockType) %>%
slice_tail(n = -12) %>%
filter(stim == stim)
R <- nest_join(R, temp)
}
R <- unnest(R, cols = c(temp))
write_csv(R, paste("RL_data_debug/", Sub, ".csv", sep = ""))
},
error = function(cond){
message(paste("Failed for subject:", Sub))
message(paste("Original Error:", cond))
})
}
next
for(file in all_files){
df <- read_csv(paste("RALT_csv/", file, sep = ""))
Sub <- str_sub(file, start = 1, end = 6)
if(Sub == "elgr00"){
browser()
}
tryCatch({
# All stims
stims <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
distinct(stim) %>%
na.omit() %>%
pull(stim)
R <- tibble(stim = stims)
i = 1
for(stim in stims){
temp <-
df %>%
select(stim, ParticipantAnswer, Reward, BlockType) %>%
slice_tail(n = -12) %>%
filter(stim == stim)
R <- nest_join(R, temp)
}
R <- unnest(R, cols = c(temp))
write_csv(R, paste("RL_data_debug/", Sub, ".csv", sep = ""))
},
error = function(cond){
message(paste("Failed for subject:", Sub))
message(paste("Original Error:", cond))
})
}
# All stims
stims <-
df %>%
select(stim, ParticipantAnswer, Reward) %>%
slice_tail(n = -12) %>%
distinct(stim) %>%
na.omit() %>%
pull(stim)
df
View(df)
